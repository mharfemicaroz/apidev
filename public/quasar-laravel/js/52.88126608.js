"use strict";(globalThis["webpackChunkauthcrud"]=globalThis["webpackChunkauthcrud"]||[]).push([[52],{3310:(e,a,t)=>{t.d(a,{M_:()=>o,Nq:()=>i,TX:()=>u,pH:()=>s,r4:()=>r});var l=t(7524);const n="http://43.207.162.49/api",s=async e=>{try{const a=await l.Z.post(`${n}/login`,e);return a.data}catch(a){throw console.error("Error logging in:",a),a}},o=async e=>{try{const a=await l.Z.get(`${n}/user`,{headers:{Authorization:`Bearer ${e}`}});return a.data}catch(a){throw console.error("Error retrieving user details:",a),a}},r=async(e,a)=>{try{const t=await l.Z.post(`${n}/user`,e,{headers:{Authorization:`Bearer ${a}`}});return t.data}catch(t){throw console.error("Error creating user:",t),t}},i=async(e,a,t)=>{try{const s=await l.Z.put(`${n}/user/${e}`,a,{headers:{Authorization:`Bearer ${t}`}});return s.data}catch(s){throw console.error("Error updating user:",s),s}},u=async e=>{try{await l.Z.get(`${n}/logout`,{headers:{Authorization:`Bearer ${e}`}})}catch(a){throw console.error("Error logging out:",a),a}}},6144:(e,a,t)=>{t.d(a,{E:()=>s});var l=t(3310),n=t(1809);const s=(0,n.Q_)("user",{state:()=>({}),actions:{async register(e,a){try{const t=await(0,l.r4)(e,a);return t}catch(t){}},async getlist(e){try{const a=await(0,l.M_)(e);return a}catch(a){}},async logout(e){try{await(0,l.TX)(e)}catch(a){}}}})},5833:(e,a,t)=>{t.d(a,{Z:()=>b});var l=t(9835),n=t(499),s=t(6144),o=t(9302),r=t(3310);const i=(0,l._)("div",{class:"text-h6"},"Registration ",-1),u={__name:"RegisterAuth",props:{UpdateInfo:{type:Array,required:!1},action:{type:String,required:!1}},setup(e){const a=e,t=(0,o.Z)(),u=(0,s.E)(),d=(0,n.iH)(null),c=(0,n.iH)(null),p=(0,n.iH)(!1),m=(0,n.iH)(""),g=(0,n.iH)(""),v=(0,n.iH)(!0),y=(0,n.iH)("visitor"),h=(0,n.iH)(["visitor","admin"]),f=(0,n.iH)(!1);async function w(){f.value=!0;try{const e=sessionStorage.getItem("token"),a={email:d.value,phoneno:c.value,username:p.value,password:m.value,name:p.value,usertype:y.value},l=await u.register(a,e);l?(t.notify({type:"positive",message:"Successfully Save  in"}),d.value="",c.value="",p.value="",m.value="",g.value=""):t.notify({type:"negative",message:"Invalid Save credentials"})}catch(e){if(e.response&&e.response.data&&e.response.data.message){const a=e.response.data.message;if("string"===typeof a)t.notify({type:"negative",message:a});else if("object"===typeof a&&a.email){const e=a.email[0];t.notify({type:"negative",message:e})}}else t.notify({type:"negative",message:"An error occurred during Save"})}f.value=!1,r.Nq.va}function b(){name.value=null,age.value=null,accept.value=!1}return(0,l.bv)((async()=>{a.UpdateInfo.length>0&&(d.value=a.UpdateInfo.email,c=a.UpdateInfo.phone,p=a.UpdateInfo.username,m=a.UpdateInfo.password,y=a.UpdateInfo.usertype)})),(e,t)=>{const n=(0,l.up)("q-card-section"),s=(0,l.up)("q-input"),o=(0,l.up)("q-select"),r=(0,l.up)("q-icon"),u=(0,l.up)("q-btn"),V=(0,l.up)("q-form"),_=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(_,{class:"my-card",flat:"",style:{width:"400px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(n,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{onSubmit:w,onReset:b,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:"Email",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),filled:"",type:"email",hint:"Email",rules:[e=>e&&e.length>0||"Please Provide Email"]},null,8,["modelValue","rules"]),(0,l.Wm)(s,{filled:"",modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),label:"Phone",mask:"(###) ### - ####",hint:"Mask: (###) ### - ####",rules:[e=>e&&e.length>0||"Please Provide Phone No"]},null,8,["modelValue","rules"]),(0,l.Wm)(o,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),filled:"",options:h.value,label:"User Type"},null,8,["modelValue","options"]),(0,l.Wm)(s,{filled:"",modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),label:"Username",hint:"Name and surname","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,l.Wm)(s,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=e=>m.value=e),filled:"",type:"password",hint:"Password"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=e=>g.value=e),filled:"",type:v.value?"password":"text",hint:"Password with toggle"},{append:(0,l.w5)((()=>[(0,l.Wm)(r,{name:v.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[5]||(t[5]=e=>v.value=!v.value)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,l._)("div",null,["insert"===a.action?((0,l.wg)(),(0,l.j4)(u,{key:0,label:"Submit",disable:f.value,type:"submit",color:"primary"},null,8,["disable"])):(0,l.kq)("",!0),"insert"!=a.action?((0,l.wg)(),(0,l.j4)(u,{key:1,label:"Save Changes",disable:f.value,color:"blue"},null,8,["disable"])):(0,l.kq)("",!0)])])),_:1})])),_:1})])),_:1})}}};var d=t(4458),c=t(3190),p=t(8326),m=t(6611),g=t(7301),v=t(2857),y=t(9379),h=t(9984),f=t.n(h);const w=u,b=w;f()(u,"components",{QCard:d.Z,QCardSection:c.Z,QForm:p.Z,QInput:m.Z,QSelect:g.Z,QIcon:v.Z,QBtn:y.Z})},3052:(e,a,t)=>{t.r(a),t.d(a,{default:()=>C});var l=t(9835),n=(t(9665),t(6970)),s=t(3310),o=t(1809);const r=(0,o.Q_)("auth",{state:()=>({token:sessionStorage.getItem("token")||null,isLoading:!1,error:null}),actions:{async login(e){this.isLoading=!0,this.error=null;try{const{token:a,usertype:t}=await(0,s.pH)(e);return console.log(a),sessionStorage.setItem("token",a),sessionStorage.setItem("usertype",t),console.log(t),this.token=a,a}catch(a){this.error=a.message}finally{this.isLoading=!1}}},getters:{isLoggedIn(){return!!this.token}}});var i=t(499),u=t(9302),d=t(8339);const c=(0,l._)("div",{class:"text-h6"},"Login",-1),p={key:0,class:"text-negative"},m={key:1,class:"text-positive"},g={__name:"LoginAuth",setup(e){const a=(0,u.Z)(),t=r(),s=(0,d.tv)(),o=(0,i.iH)(),g=(0,i.iH)(),v=(0,i.iH)(!1),y=(0,i.iH)(),h=async()=>{v.value=!0,y.value="";try{const e=await t.login({email:o.value,password:g.value});e?(a.notify({type:"positive",message:"Successfully logged in"}),s.push("/welcome")):a.notify({type:"negative",message:"Invalid login credentials"})}catch(y){if(y.response&&y.response.data&&y.response.data.message){const t=y.response.data.message;if("string"===typeof t)a.notify({type:"negative",message:t});else if("object"===typeof t&&t.email){const e=t.email[0];a.notify({type:"negative",message:e})}}else a.notify({type:"negative",message:"An error occurred during login"})}v.value=!1};return(e,a)=>{const t=(0,l.up)("q-card-section"),s=(0,l.up)("q-input"),r=(0,l.up)("q-btn"),i=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(i,{class:"my-card",flat:"",style:{width:"400px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(t,null,{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(t,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),label:"email",placeholder:"Email"},null,8,["modelValue"]),(0,l.Wm)(s,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),type:"password",label:"Password",placeholder:"Password"},null,8,["modelValue"]),(0,l.Wm)(r,{style:{"margin-top":"1em"},color:"primary",class:"full-width",label:"Login",onClick:h,disable:v.value},null,8,["disable"]),y.value?((0,l.wg)(),(0,l.iD)("p",p,(0,n.zw)(y.value),1)):(0,l.kq)("",!0),e.isLoggedIn?((0,l.wg)(),(0,l.iD)("p",m,"Logged in!")):(0,l.kq)("",!0)])),_:1})])),_:1})}}};var v=t(4458),y=t(3190),h=t(6611),f=t(9379),w=t(9984),b=t.n(w);const V=g,_=V;b()(g,"components",{QCard:v.Z,QCardSection:y.Z,QInput:h.Z,QBtn:f.Z});var q=t(5833);const Z={class:"column items-center",style:{height:"150px"}},k=(0,l._)("br",null,null,-1),W=(0,l._)("br",null,null,-1),U={class:"col"},I={__name:"LoginView",setup(e){const a=(0,i.iH)("login");(0,u.Z)();return(e,t)=>{const n=(0,l.up)("q-tabs"),s=(0,l.up)("q-separator"),o=(0,l.up)("q-tab-panel"),r=(0,l.up)("q-tab-panels"),i=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",Z,[k,W,(0,l._)("div",U,[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},null,8,["modelValue"]),(0,l.Wm)(s),(0,l.Wm)(r,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"login"},{default:(0,l.w5)((()=>[(0,l.Wm)(_)])),_:1}),(0,l.Wm)(o,{name:"register"},{default:(0,l.w5)((()=>[(0,l.Wm)(q.Z,{UpdateInfo:[],action:"insert"})])),_:1})])),_:1},8,["modelValue"])])),_:1})])])}}};var Q=t(7817),S=t(926),H=t(9800),P=t(4106);const E=I,C=E;b()(I,"components",{QCard:v.Z,QTabs:Q.Z,QSeparator:S.Z,QTabPanels:H.Z,QTabPanel:P.Z})}}]);